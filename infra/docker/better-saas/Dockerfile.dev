# Development Dockerfile for better-saas
# Optimized for development with hot-reload and debugging

FROM node:22-alpine

# Install additional tools for development
RUN apk add --no-cache git curl bash

# Install pnpm
RUN corepack enable && corepack prepare pnpm@10.6.4 --activate

# Set working directory
WORKDIR /app

# Copy package files
COPY package.json pnpm-lock.yaml ./

# Install all dependencies (including devDependencies)
RUN pnpm install --frozen-lockfile

# Copy the rest of the application
COPY . .

# Set environment to development
ENV NODE_ENV=development
ENV NEXT_TELEMETRY_DISABLED=1

# Expose ports for Next.js dev server and debugging
EXPOSE 2999
EXPOSE 9229

# Volume for hot-reload
VOLUME ["/app"]

# Start development server with turbo mode
CMD ["pnpm", "dev"]